import React from 'react'; 
import copy from 'copy-to-clipboard';
import Header from './header';
import svgtojsx from 'svg-to-jsx';  
import SyntaxHighlighter from 'react-syntax-highlighter';
import { tomorrowNightBright } from 'react-syntax-highlighter/dist/esm/styles/hljs'; 

const sampleSvg = '<?xml version="1.0" encoding="utf-8"?> <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 112.4" enable-background="new 0 0 100 112.4" xml:space="preserve"> <g> <g> <g> <g id="group-2svg"> <path id="path-1_10_" fill="#010101" d="M68.1,30.5c0,2.6-2.1,4.7-4.7,4.7c-2.6,0-4.7-2.1-4.7-4.7s2.1-4.7,4.7-4.7 C66,25.8,68.1,27.9,68.1,30.5z"/> <path id="path-2_10_" fill="#010101" d="M41.2,30.5c0,2.6-2.1,4.7-4.7,4.7c-2.6,0-4.7-2.1-4.7-4.7s2.1-4.7,4.7-4.7 C39.1,25.8,41.2,27.9,41.2,30.5z"/> <path id="path-3_10_" fill="#010101" d="M53.6,65.2h-6.5c-8.2,0-14.9-6.6-14.9-14.7c0-1.1,0.9-1.9,1.9-1.9s1.9,0.9,1.9,1.9 c0,6.1,4.9,10.9,11.1,10.9h6.5c6.2,0,11.1-4.7,11.1-10.7c0-1.1,0.9-1.9,1.9-1.9c1.1,0,1.9,0.9,1.9,1.9 C68.5,58.8,61.9,65.2,53.6,65.2z"/> <path id="path-4_10_" fill="#010101" d="M50,81.8c-22.4,0-40.6-18.2-40.6-40.6C9.4,18.8,27.6,0.5,50,0.5 c22.4,0,40.6,18.2,40.6,40.6C90.6,63.5,72.4,81.8,50,81.8z M50,4.4c-20.3,0-36.8,16.5-36.8,36.8c0,20.3,16.5,36.8,36.8,36.8 c20.3,0,36.8-16.5,36.8-36.8C86.8,20.9,70.3,4.4,50,4.4z"/> </g> </g> </g> <g> <path d="M17.7,94.5h-1.1v-8.8h1.1v3.8h4.4v-3.8h1.1v8.8h-1.1v-4h-4.4V94.5z"/> <path d="M27.2,88.3c0.8,0,1.5,0.2,2,0.7c0.5,0.4,0.7,1.1,0.7,1.8v3.7h-1.1v-0.8h0c-0.5,0.7-1.1,1-1.9,1c-0.7,0-1.2-0.2-1.7-0.6 c-0.4-0.4-0.7-0.9-0.7-1.5c0-0.6,0.2-1.1,0.7-1.5c0.5-0.4,1.1-0.6,1.9-0.6c0.7,0,1.2,0.1,1.7,0.4v-0.3c0-0.4-0.2-0.7-0.5-1 c-0.3-0.3-0.7-0.4-1.1-0.4c-0.6,0-1.1,0.3-1.5,0.8l-1-0.6C25.3,88.7,26.1,88.3,27.2,88.3z M25.8,92.7c0,0.3,0.1,0.5,0.4,0.7 s0.5,0.3,0.9,0.3c0.5,0,0.9-0.2,1.3-0.5c0.4-0.4,0.6-0.8,0.6-1.2c-0.4-0.3-0.8-0.4-1.5-0.4c-0.5,0-0.8,0.1-1.2,0.3 C25.9,92.1,25.8,92.4,25.8,92.7z"/> <path d="M31.5,88.5h1.1v0.8h0c0.2-0.3,0.4-0.5,0.8-0.7c0.4-0.2,0.7-0.3,1.1-0.3c0.7,0,1.3,0.2,1.7,0.6c0.4,0.4,0.6,1,0.6,1.8v3.8 h-1.1v-3.7c0-1-0.5-1.5-1.5-1.5c-0.5,0-0.8,0.2-1.1,0.5c-0.3,0.4-0.5,0.8-0.5,1.3v3.3h-1.1V88.5z"/> <path d="M40.9,94.7c-0.8,0-1.5-0.3-2-0.9c-0.6-0.6-0.8-1.4-0.8-2.3c0-0.9,0.3-1.6,0.8-2.3c0.6-0.6,1.2-0.9,2-0.9 c0.4,0,0.8,0.1,1.2,0.3c0.4,0.2,0.6,0.4,0.8,0.8h0l0-0.8v-2.8h1.1v8.8H43v-0.8h0c-0.2,0.3-0.5,0.6-0.8,0.8 C41.8,94.6,41.4,94.7,40.9,94.7z M41.1,93.7c0.6,0,1-0.2,1.4-0.6c0.4-0.4,0.6-0.9,0.6-1.6c0-0.6-0.2-1.2-0.6-1.6 c-0.4-0.4-0.8-0.6-1.4-0.6c-0.5,0-1,0.2-1.4,0.6c-0.4,0.4-0.6,0.9-0.6,1.6c0,0.6,0.2,1.2,0.6,1.6C40.1,93.5,40.6,93.7,41.1,93.7z" /> <path d="M48.4,94.7c-0.9,0-1.6-0.3-2.2-0.9c-0.6-0.6-0.9-1.4-0.9-2.3c0-0.9,0.3-1.7,0.9-2.3c0.6-0.6,1.3-0.9,2.2-0.9 c0.6,0,1.2,0.2,1.6,0.5c0.5,0.3,0.8,0.7,1,1.3l-1,0.4c-0.3-0.8-0.9-1.1-1.7-1.1c-0.5,0-1,0.2-1.3,0.6c-0.4,0.4-0.6,0.9-0.6,1.6 c0,0.6,0.2,1.1,0.6,1.6c0.4,0.4,0.8,0.6,1.3,0.6c0.8,0,1.4-0.4,1.8-1.1l1,0.4c-0.2,0.5-0.6,1-1,1.3C49.6,94.6,49.1,94.7,48.4,94.7 z"/> <path d="M53.4,94.5h-1.1v-6h1.1v1h0c0.1-0.3,0.4-0.6,0.7-0.8c0.4-0.2,0.7-0.3,1.1-0.3c0.3,0,0.6,0,0.8,0.1l-0.3,1.1 c-0.1-0.1-0.4-0.1-0.7-0.1c-0.4,0-0.8,0.2-1.1,0.5c-0.3,0.3-0.5,0.7-0.5,1.2V94.5z"/> <path d="M59.1,88.3c0.8,0,1.5,0.2,2,0.7c0.5,0.4,0.7,1.1,0.7,1.8v3.7h-1.1v-0.8h0c-0.5,0.7-1.1,1-1.9,1c-0.7,0-1.2-0.2-1.7-0.6 c-0.4-0.4-0.7-0.9-0.7-1.5c0-0.6,0.2-1.1,0.7-1.5c0.5-0.4,1.1-0.6,1.9-0.6c0.7,0,1.2,0.1,1.7,0.4v-0.3c0-0.4-0.2-0.7-0.5-1 c-0.3-0.3-0.7-0.4-1.1-0.4c-0.6,0-1.1,0.3-1.5,0.8l-1-0.6C57.2,88.7,58,88.3,59.1,88.3z M57.6,92.7c0,0.3,0.1,0.5,0.4,0.7 c0.3,0.2,0.5,0.3,0.9,0.3c0.5,0,0.9-0.2,1.3-0.5c0.4-0.4,0.6-0.8,0.6-1.2c-0.4-0.3-0.8-0.4-1.5-0.4c-0.5,0-0.8,0.1-1.2,0.3 C57.7,92.1,57.6,92.4,57.6,92.7z"/> <path d="M70.5,94.5c-0.3,0.1-0.6,0.2-1,0.2c-0.5,0-0.9-0.2-1.2-0.5c-0.3-0.3-0.5-0.7-0.5-1.3v-3.4h-2.7v5h-1.1v-5h-1.1v-1h1.1 v-0.9c0-0.3,0.1-0.6,0.2-0.8c0.1-0.2,0.2-0.5,0.4-0.6c0.2-0.2,0.4-0.3,0.6-0.4c0.3-0.1,0.5-0.1,0.8-0.1c0.4,0,0.7,0.1,1,0.2 l-0.3,1c-0.2-0.1-0.4-0.1-0.7-0.1c-0.3,0-0.5,0.1-0.7,0.3c-0.2,0.2-0.3,0.4-0.3,0.8v0.8h2.7v-1.8h1.1v1.8h1.5v1h-1.5v3 c0,0.4,0.1,0.7,0.2,0.8c0.2,0.1,0.3,0.2,0.5,0.2c0.1,0,0.2,0,0.3,0c0.1,0,0.2,0,0.2-0.1L70.5,94.5z"/> <path d="M74.4,94.7c-0.9,0-1.6-0.3-2.2-0.9c-0.6-0.6-0.9-1.4-0.9-2.3c0-0.9,0.3-1.7,0.8-2.3c0.6-0.6,1.3-0.9,2.1-0.9 c0.9,0,1.6,0.3,2.1,0.9c0.5,0.6,0.8,1.4,0.8,2.4l0,0.1h-4.7c0,0.6,0.2,1.1,0.6,1.4c0.4,0.4,0.8,0.5,1.4,0.5c0.7,0,1.3-0.4,1.7-1.1 l1,0.5c-0.3,0.5-0.6,0.9-1.1,1.2C75.5,94.6,75,94.7,74.4,94.7z M72.5,90.8H76c0-0.4-0.2-0.8-0.5-1c-0.3-0.3-0.7-0.4-1.2-0.4 c-0.4,0-0.8,0.1-1.1,0.4C72.8,90,72.6,90.3,72.5,90.8z"/> <path d="M81.1,94.7c-0.8,0-1.5-0.3-2-0.9c-0.6-0.6-0.8-1.4-0.8-2.3c0-0.9,0.3-1.6,0.8-2.3c0.6-0.6,1.2-0.9,2-0.9 c0.4,0,0.8,0.1,1.2,0.3c0.4,0.2,0.6,0.4,0.8,0.8h0l0-0.8v-2.8h1.1v8.8h-1.1v-0.8h0c-0.2,0.3-0.5,0.6-0.8,0.8 C81.9,94.6,81.5,94.7,81.1,94.7z M81.3,93.7c0.6,0,1-0.2,1.4-0.6c0.4-0.4,0.6-0.9,0.6-1.6c0-0.6-0.2-1.2-0.6-1.6 c-0.4-0.4-0.8-0.6-1.4-0.6c-0.5,0-1,0.2-1.4,0.6c-0.4,0.4-0.6,0.9-0.6,1.6c0,0.6,0.2,1.2,0.6,1.6C80.3,93.5,80.7,93.7,81.3,93.7z" /> <path d="M15.3,100.8l-1.9,6h-1.2l-1.5-4.6l-1.5,4.6H8l-1.9-6h1.2l1.3,4.6h0l1.5-4.6h1.2l1.5,4.6h0l1.3-4.6H15.3z"/> <path d="M17.7,98.7c0,0.2-0.1,0.4-0.2,0.6c-0.2,0.2-0.3,0.2-0.6,0.2c-0.2,0-0.4-0.1-0.6-0.2c-0.2-0.2-0.2-0.3-0.2-0.6 c0-0.2,0.1-0.4,0.2-0.6c0.2-0.2,0.3-0.2,0.6-0.2c0.2,0,0.4,0.1,0.6,0.2C17.6,98.3,17.7,98.5,17.7,98.7z M17.5,100.8v6h-1.1v-6 H17.5z"/> <path d="M21.5,107c-0.5,0-0.9-0.2-1.2-0.5s-0.5-0.7-0.5-1.3v-3.4h-1.1v-1h1.1V99h1.1v1.8h1.5v1h-1.5v3c0,0.4,0.1,0.7,0.2,0.8 c0.2,0.1,0.3,0.2,0.5,0.2c0.1,0,0.2,0,0.3,0c0.1,0,0.2,0,0.2-0.1l0.4,1C22.3,106.9,21.9,107,21.5,107z"/> <path d="M23.8,98H25v2.8l0,0.8h0c0.2-0.3,0.4-0.5,0.8-0.7c0.4-0.2,0.7-0.3,1.1-0.3c0.7,0,1.3,0.2,1.7,0.6c0.4,0.4,0.6,1,0.6,1.8 v3.8H28v-3.6c0-1.1-0.5-1.6-1.4-1.6c-0.5,0-0.9,0.2-1.2,0.6s-0.5,0.8-0.5,1.3v3.3h-1.1V98z"/> <path d="M48.6,107.1c-0.4,0-0.8-0.1-1.2-0.3c-0.4-0.2-0.6-0.4-0.8-0.8h0v0.8h-1.1V98h1.1v2.8l0,0.8h0c0.2-0.3,0.5-0.6,0.8-0.8 c0.4-0.2,0.8-0.3,1.2-0.3c0.8,0,1.5,0.3,2,0.9c0.6,0.6,0.9,1.4,0.9,2.3c0,0.9-0.3,1.7-0.9,2.3C50.1,106.7,49.4,107.1,48.6,107.1z M48.4,106c0.5,0,1-0.2,1.4-0.6c0.4-0.4,0.6-0.9,0.6-1.6c0-0.6-0.2-1.2-0.6-1.6c-0.4-0.4-0.8-0.6-1.4-0.6c-0.6,0-1,0.2-1.4,0.6 c-0.4,0.4-0.5,0.9-0.5,1.6c0,0.6,0.2,1.2,0.5,1.6C47.4,105.8,47.9,106,48.4,106z"/> <path d="M57.9,100.8l-3.8,8.7H53l1.4-3l-2.5-5.7h1.2l1.8,4.3h0l1.8-4.3H57.9z"/> <path d="M62.1,106.9V98h3.2c0.7,0,1.3,0.2,1.8,0.7c0.5,0.5,0.7,1,0.7,1.7c0,0.9-0.4,1.5-1.2,1.8v0.1c0.5,0.1,0.8,0.4,1.1,0.8 c0.3,0.4,0.4,0.8,0.4,1.2c0,0.7-0.3,1.3-0.8,1.8c-0.5,0.5-1.1,0.7-1.9,0.7H62.1z M63.2,99.1v2.7h2.1c0.4,0,0.7-0.1,1-0.4 c0.3-0.3,0.4-0.6,0.4-0.9c0-0.3-0.1-0.7-0.4-0.9c-0.3-0.3-0.6-0.4-1-0.4H63.2z M63.2,102.9v2.9h2.3c0.4,0,0.8-0.1,1-0.4 c0.3-0.3,0.4-0.6,0.4-1c0-0.4-0.1-0.7-0.4-1c-0.3-0.3-0.6-0.4-1.1-0.4H63.2z"/> <path d="M71.7,100.6c0.8,0,1.5,0.2,2,0.7c0.5,0.4,0.7,1.1,0.7,1.8v3.7h-1.1V106h0c-0.5,0.7-1.1,1-1.9,1c-0.7,0-1.2-0.2-1.7-0.6 c-0.4-0.4-0.7-0.9-0.7-1.5c0-0.6,0.2-1.1,0.7-1.5c0.5-0.4,1.1-0.6,1.9-0.6c0.7,0,1.2,0.1,1.7,0.4V103c0-0.4-0.2-0.7-0.5-1 c-0.3-0.3-0.7-0.4-1.1-0.4c-0.6,0-1.1,0.3-1.5,0.8l-1-0.6C69.9,101,70.7,100.6,71.7,100.6z M70.3,105c0,0.3,0.1,0.5,0.4,0.7 c0.2,0.2,0.5,0.3,0.9,0.3c0.5,0,0.9-0.2,1.3-0.5c0.4-0.4,0.6-0.8,0.6-1.2c-0.4-0.3-0.8-0.4-1.5-0.4c-0.5,0-0.8,0.1-1.2,0.3 C70.4,104.4,70.3,104.7,70.3,105z"/> <path d="M77.1,98v8.8H76V98H77.1z"/> <path d="M80.2,98.7c0,0.2-0.1,0.4-0.2,0.6c-0.2,0.2-0.3,0.2-0.6,0.2c-0.2,0-0.4-0.1-0.6-0.2c-0.2-0.2-0.2-0.3-0.2-0.6 c0-0.2,0.1-0.4,0.2-0.6c0.2-0.2,0.3-0.2,0.6-0.2c0.2,0,0.4,0.1,0.6,0.2C80.1,98.3,80.2,98.5,80.2,98.7z M80,100.8v6h-1.1v-6H80z" /> <path d="M84.3,109.7c-0.3,0-0.7,0-0.9-0.1c-0.3-0.1-0.6-0.2-0.8-0.4c-0.2-0.2-0.4-0.3-0.6-0.6c-0.2-0.2-0.3-0.4-0.4-0.7l1.1-0.4 c0.1,0.4,0.3,0.6,0.6,0.9c0.3,0.2,0.7,0.3,1.1,0.3c0.6,0,1.1-0.2,1.4-0.6c0.3-0.4,0.5-0.9,0.5-1.5V106h-0.1 c-0.2,0.3-0.5,0.6-0.9,0.8c-0.4,0.2-0.8,0.3-1.2,0.3c-0.8,0-1.5-0.3-2-0.9c-0.6-0.6-0.8-1.4-0.8-2.3s0.3-1.7,0.8-2.3 c0.6-0.6,1.2-0.9,2-0.9c0.4,0,0.8,0.1,1.2,0.3c0.4,0.2,0.7,0.4,0.9,0.8h0.1v-0.8h1.1v5.8c0,1-0.3,1.7-0.8,2.3 C86,109.4,85.2,109.7,84.3,109.7z M84.4,106c0.6,0,1-0.2,1.4-0.6c0.4-0.4,0.6-0.9,0.6-1.6c0-0.6-0.2-1.2-0.6-1.6 c-0.4-0.4-0.8-0.6-1.4-0.6c-0.5,0-1,0.2-1.4,0.6c-0.4,0.4-0.6,0.9-0.6,1.6c0,0.6,0.2,1.2,0.6,1.6C83.4,105.8,83.8,106,84.4,106z" /> <path d="M91.2,100.6c0.8,0,1.5,0.2,2,0.7c0.5,0.4,0.7,1.1,0.7,1.8v3.7h-1.1V106h0c-0.5,0.7-1.1,1-1.9,1c-0.7,0-1.2-0.2-1.7-0.6 c-0.4-0.4-0.7-0.9-0.7-1.5c0-0.6,0.2-1.1,0.7-1.5c0.5-0.4,1.1-0.6,1.9-0.6c0.7,0,1.2,0.1,1.7,0.4V103c0-0.4-0.2-0.7-0.5-1 c-0.3-0.3-0.7-0.4-1.1-0.4c-0.6,0-1.1,0.3-1.5,0.8l-1-0.6C89.3,101,90.1,100.6,91.2,100.6z M89.8,105c0,0.3,0.1,0.5,0.4,0.7 c0.2,0.2,0.5,0.3,0.9,0.3c0.5,0,0.9-0.2,1.3-0.5c0.4-0.4,0.6-0.8,0.6-1.2c-0.4-0.3-0.8-0.4-1.5-0.4c-0.5,0-0.8,0.1-1.2,0.3 C89.9,104.4,89.8,104.7,89.8,105z"/> <path fill="#ED1C24" d="M32.1,102.2c0-0.3,0-0.6,0-0.9c0-0.1,0-0.1,0-0.2c0.2-1.2,1-2.5,2.7-2.4c0.7,0,1.4,0.3,1.9,0.8 c0.1,0.1,0.3,0.3,0.4,0.4c0.1-0.1,0.1-0.2,0.2-0.2c0.5-0.6,1.1-1,2-1c1.1-0.1,2,0.4,2.5,1.4c0.4,0.7,0.5,1.5,0.3,2.4 c-0.2,1-0.7,1.8-1.3,2.6c-1,1.2-2.2,2.2-3.5,3.1c-0.1,0-0.2,0-0.2,0c-1-0.7-2-1.5-2.9-2.4c-0.8-0.8-1.5-1.7-1.8-2.8 C32.2,102.7,32.2,102.4,32.1,102.2z"/> </g> </g> </svg>';
 
export default class Convertor extends React.Component{
    constructor(){
        super();
        this.state = {
            convertedData:'',
            rawData:'',
            loading: false,
            copying:false,
            error:false,
            output: false
        }
        this.inputRef = React.createRef(); 
    }

    insertSample = (e) =>{ 
          this.setState({
                rawData: sampleSvg,
                    convertedData:'', 
                    loading: false,
                    copying:false,
                    error:false,
                    output: false
            });
    }
 
      handleCopy = (value) => {
            copy(value); 
        this.setState({
                copying:true,
            })
        setTimeout(()=>{
            this.setState({
                copying:false,
            })
        },500);
    }
    handleChange = (e) =>{  
    
        const rawData = this.inputRef.current.value;

            this.setState({
                rawData
            });    
        if(rawData){

            this.setState({
                loading: true,
                error:false,
            });    

            svgtojsx(rawData, (error, jsx) => {
                if(jsx) {
                    setTimeout(()=>{
                        this.setState({ 
                            convertedData: jsx, 
                            loading: false,
                            output: true
                        });   
                    },500);
                }
                else{  
                        this.setState({ 
                                convertedData: `${error}`, 
                        error:true,
                        loading: false,
                        output: true
                        });   
                }
            }); 
                

        }
        else{ 
               this.setState({
                    convertedData:'',
                    rawData:'',
                    loading: false,
                    copying:false,
                    error:false,
                    output: false
                    }); 
        }

    } 

    render()
    {
        const {convertedData,loading, rawData,copying,error, output} = this.state;
        return(
            <>

    <Header />

          
 
                <div className="input-container">
                    <a className="sample-input" onClick={e=>this.insertSample(e)}>{`Click here to insert Sample SVG`}</a>
                    <h2>Input <small><strong>SVG</strong></small></h2>
                    <textarea placeholder={'Paste your SVG here..'} value={rawData} ref={this.inputRef} onChange={(e)=>this.handleChange(e) } rows={'10'}  /><br/>
                    <button type={'submit'} disabled={!rawData|loading} onClick={this.handleChange}>{loading?'Converting...':'Convert SVG to JSX'}</button> 
                </div> 

                {output && rawData &&
                        <div className={(error) ? 'error output-container':'output-container'}>
                            <h2>Output <small><strong>JSX</strong></small></h2>
                            {!error && rawData && convertedData && <button onClick={e=>this.handleCopy(`${convertedData}`)}>{copying?'Copied!':'Copy Code'}</button> } 
                            
                            <SyntaxHighlighter style={tomorrowNightBright}>
                                {convertedData}
                            </SyntaxHighlighter>  
                            {!error && rawData && convertedData && <>
                                <h2>Preview</h2>  
                                <div className="preview-container" dangerouslySetInnerHTML={{__html:convertedData}} /> 
                            </>
                            }
                        </div>
                }

           
  

            </>
        )
    }
}
